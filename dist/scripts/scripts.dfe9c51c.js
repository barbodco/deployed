"use strict";angular.module("barbod",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/login.tpl.html",controller:"LoginCtrl"}).when("/dashboard",{templateUrl:"views/main-dashboard.tpl.html",controller:"mainDashboardCtrl"}).when("/dashboard/modules",{templateUrl:"views/dashboard.tpl.html",controller:"DashboardCtrl"})}]);var barbod=angular.module("barbod");barbod.controller("DashboardCtrl",["$scope","$http","$templateRequest","$compile","APIService",function(a,b,c,d,e){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"],b.get("calls.json").success(function(b){void 0==a.callConfig&&null===a.callConfig||(a.callConfig=b),console.log(a.callConfig)}),$(".in-login-bg").removeClass("in-login-bg"),$(".dropdown").dropdown({transition:"drop"}),console.log("DashbaordCtrl is ready"),a.mouseoverInfo=function(){$(".brand-edit-each").popup({position:"top center"})},a.mainData="",a.showColumn={},a.typeControl={},a.messageHandler="test",a.dataTableRequester=function(b,c){console.log("here"),$("#"+b).append('<div class="ui active inverted dimmer"><div class="ui medium text loader">Loading</div></div>');var d={advanceSearch:[{key:"",value:""}]},f={userId:"169055BD-24D6-4E10-9F98-D4A8C6E102C5",sessionId:"169055BD-24D6-4E10-9F98-D4A8C6E102C5",browserInfo:"chrome canary",rowIndex:c,rowSize:7,orderColumn:"code",orderType:"desc",searchKeyword:"",advanceSearch:JSON.stringify(d)},g="http://service.webbels.net/brand/paginate",h="GET";e.doApiCall(f,g,h,function(c){if("true"!==c.success)$("#"+b+" .loader").hide().parent().append('<i class="huge icons">                                      <i class="big red warning circle icon"></i>                                      <i class="black setting loading icon"></i>                                    </i><br>                                    <button class="ui big compact labeled red icon button">                                      <i class="retweet icon"></i>                                      Retry ?                                    </button>');else{a.mainData=c.GD,a.pagination=c.GD.pagecount,a.pageNumbers=[];for(var d=0;d<a.pagination;d++)a.pageNumbers.push(+d+1);$("#"+b).children(".inverted.dimmer").remove()}a.messageHandler=c.Message})},a.validation=function(b){a.validation={};var c={brandCode:a.validation.brandCode,brandDescription:a.validation.brandDescription,brandActive:a.validation.brandActive};return c},a.brandAdding=function(){var c=angular.copy(a.brand);c.userId="169055BD-24D6-4E10-9F98-D4A8C6E102C5",c.browserInfo="Chrome Carany",c.companyId="",c.isActive=1,c.isDeleted=0,c.sessionId="",b({url:"http://service.webbels.net/brand/save/",method:"GET",params:c}).then(function(b){a.dataTableRequester("brandModule",1),console.log(b)}),a.closeOverSlider()},a.brandDelete=function(){var c=[];angular.forEach(a.gridCheckBox,function(a,b){c.push(b)});var d=c.length,e={};e.userId="169055BD-24D6-4E10-9F98-D4A8C6E102C5",e.browserInfo="Chrome Carany",e.ids=c,e.sessionId="",b({url:"http://service.webbels.net/brand/delete/",method:"GET",params:e}).then(function(b){a.gridCheckBox={},a.dataTableRequester("brandModule",1),console.log(b)}),a.closeOverSlider();for(var f=0;d>f;f++)$("[module-id]").prop("checked",!1)},a.templateRequester=function(b,e){c("views/"+b+".tpl.html").then(function(b){var c=angular.element(b);$("#"+e).html(c),d(c.contents())(a),$(".brand-edit-each").popup({position:"top center"})})},a.closeOverSlider=function(){$(".over-slider").toggleClass("hide-over-slider"),$(".page.dimmer").toggleClass("active"),$("#over-slider").html("")},a.showItems=function(a){$(".items-list-"+a).toggleClass("hide")},a.spotlight=function(){$(".global-spotlight").dimmer("show")},a.moduleSlider=function(a){var b=$(".module-container").outerWidth();$(".slide-buttons li").removeClass("current"),$(".slide-buttons li:eq("+a+")").addClass("current"),$(".scroller").animate({scrollLeft:a*b},1e3)},a.gridCheckBox={},a.gridCheckBoxCounter=0,a.gridCheckBoxStatus=function(b,c,d,e){$('[module-id="'+b+'"]').is(":checked")?(a.gridCheckBoxCounter++,a.gridCheckBox[b]={id:b,description:d,active:c,name:e}):(delete a.gridCheckBox[b],a.gridCheckBoxCounter--),console.log(a.gridCheckBox),console.log(a.gridCheckBoxCounter)},a.gridCheckBoxStatusRemover=function(b){delete a.gridCheckBox[b]},a.checkAll=function(){$("[module-id]").trigger("click")}}]),barbod.directive("genericTable",function(){return{restrict:"AE",templateUrl:"views/tables.tpl.html"}}),barbod.directive("genericOverSlider",function(){return{restrict:"AE",templateUrl:"views/overslider.tpl.html"}}),barbod.factory("APIService",["$http",function(a){return{doApiCall:function(b,c,d,e){var f=a({method:d,url:c,params:b});return f.success(e),f.error(e),f}}}]),barbod.service("LocationService",["$location",function(a){this.go=function(b){return a.path(b)}}]),barbod.controller("LoginCtrl",["$scope","LocationService","APIService","$http",function(a,b,c,d){$("body").addClass("in-login-bg"),d.get("calls.json").success(function(b){a.callConfig=b,console.log(a.callConfig)}),a.go=function(a){b.go(a)},a.validation=function(){var b=a.callConfig.endpoint.main+a.callConfig.endpoint.userLogin,d=a.callConfig.endpoint.methods[1],e=a.auth;c.doApiCall(e,b,d,function(b){"true"===b.sessionValid&&a.go("/dashboard")})}}]),barbod.controller("mainDashboardCtrl",["$scope","$location",function(a,b){return $(".shape").shape(),$(".dropdown").dropdown({transition:"drop"}),a.go=function(a){b.path(a)},a.modules={},a.dashboardGenerator=function(){var b={userId:"2564576577888-3455454-4555",sessionValid:"true",access:"|M(PO-B-IT-DI)|"};a.accessSeperator(b)},a.accessSeperator=function(b){var c=b.access,d=c.replace("|M(","").replace(")|","").split("-");angular.forEach(d,function(b,c){a.moduleConstructor(b)}),console.log(a.modules)},a.moduleConstructor=function(b){var c={B:{name:"Brand",mainIcon:"puzzle"},PO:{name:"Purchase Order",mainIcon:"heartbeat"},IT:{name:"Item",mainIcon:"alarm"},DI:{name:"Buy",mainIcon:"find"}};a.modules[b]={icon:c[b].mainIcon,name:c[b].name,subAccess:[{icon:c[b].mainIcon,name:"add"},{icon:c[b].mainIcon,name:"edit"},{icon:c[b].mainIcon,name:"delete"}]},console.log(c[b])},{restrict:"AE",templateUrl:"scripts/dashboard/main-dashboard.tpl.html"}}]);
<body>
<script   src="https://code.jquery.com/jquery-2.2.3.js"   integrity="sha256-laXWtGydpwqJ8JA+X9x2miwmaiKhn8tVmOVEigRNtP4="   crossorigin="anonymous"></script>
	<style type="text/css"> 
    .selected { background-color: red; } 
</style> 
<div id="test"> 
    <div class="container"> 
        <p class="toolbar"><input type="button" value="level1"></input> 
        <p class="line">level 1</p> 
        <p class="line">level 1</p> 
        <div class="container"> 
            <p class="toolbar"><input type="button" value="level2"></input> 
            <p class="line">level 2</p> 
            <p class="line">level 2</p> 
            <div class="container"> 
                <p class="toolbar"><input type="button" value="level3"></input> 
                <p class="line">level 3</p> 
                <p class="line">level 3</p> 
            </div> 
        </div> 
    </div> 
</div> 
<script type="text/javascript"> 
    jQuery(document).ready(function() { 
        jQuery('#test').on('click', 'input:button', function() { 
            jQuery('p.line', jQuery(this).closest('.container')).toggleClass('selected');

        }); 
    }); 
</script>
</body>